Scenario: Multi-tenant isolation is addressed
This document outlines the database architecture for the Perseus platform. We use PostgreSQL as the primary relational database, with Prisma as our Object-Relational Mapping (ORM) tool. The schema is designed for multi-tenant isolation and efficient robot-human collaboration.
> The data model prioritizes strong consistency and strict multi-tenant isolation. Every organizational unit belongs to a Tenant. Access control is enforced at the database level using a shared-schema, row-filtering approach.
  tenantId  String
  tenant    Tenant   @relation(fields: [tenantId], references: [id])
  @@id([userId, tenantId])
  tenantId  String
  tenant    Tenant   @relation(fields: [tenantId], references: [id])
  tenantId       String
  tenant         Tenant   @relation(fields: [tenantId], references: [id])
  tenantId  String?
  tenant    Tenant?  @relation(fields: [tenantId], references: [id])
## Multi-Tenant Isolation Strategy
We implement a shared-database, shared-schema architecture with logical isolation. Security is maintained through strict row-level filtering.
### Row-Level Isolation
Every table containing organization-specific data includes a `tenantId` column. Our application middleware injects this ID into every query. This ensures that users can only see or modify data belonging to their active tenant session.
